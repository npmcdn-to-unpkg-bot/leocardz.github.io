"use strict";var __decorate=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),http_1=require("@angular/http"),platform_browser_1=require("@angular/platform-browser");require("marked");var angular2_moment_1=require("angular2-moment"),home_component_1=require("./home.component"),android_component_1=require("./android.component"),blog_component_1=require("./blog.component"),ios_component_1=require("./ios.component"),lab_component_1=require("./lab.component"),about_component_1=require("./about.component"),open_source_component_1=require("./open.source.component"),privacy_component_1=require("./privacy.component"),tag_component_1=require("./tag.component"),not_found_component_1=require("./not.found.component"),index_service_1=require("../services/index.service"),search_service_1=require("../services/search.service"),meta_service_1=require("../services/meta.service"),label_service_1=require("../services/label.service"),AppComponent=function(){function e(e,t,o,n){var r=this;this._router=e,this._indexService=t,this._metaService=o,this._labelService=n,this.isLoading=!0,this.posts=[],this.activities=[],t.activities(function(e){return r.activities=e}),e.events.subscribe(function(e){e instanceof router_1.NavigationStart?(r.posts=[],r.isLoading=!0):e instanceof router_1.NavigationEnd&&(r.isLoading=!1)})}return e.prototype.ngOnInit=function(){},e.prototype.actionSearch=function(e){var t=this;this._indexService.fetch().map(function(e){return e.json()}).subscribe(function(o){t.posts=t._indexService.search(o,e,["title","content"])})},e.prototype.actionNavigate=function(e){this._router.navigate(["/"+e.label+"/"+e.path])},e.prototype.getLinkStyle=function(e){return"/"===e&&window.location.pathname===e||"/"!==e&&0===window.location.pathname.indexOf(e)},e.prototype.labelnize=function(e,t){return this._labelService.labelnize(e,t)},e.prototype.markdown=function(e){e=e.replace(/\*\*\*\*/g,"");var t=marked(e);return t.substring(3,t.length-5)+" "},e=__decorate([core_1.Component({moduleId:module.id,selector:"app",templateUrl:"/dist/app/views/app.component.html",directives:[router_1.ROUTER_DIRECTIVES],pipes:[angular2_moment_1.TimeAgoPipe],providers:[index_service_1.IndexService,search_service_1.SearchService,meta_service_1.MetaService,label_service_1.LabelService,platform_browser_1.Title,http_1.HTTP_PROVIDERS],precompile:[home_component_1.HomeComponent,android_component_1.AndroidComponent,blog_component_1.BlogComponent,ios_component_1.IOSComponent,lab_component_1.LabComponent,about_component_1.AboutComponent,open_source_component_1.OpenSourceComponent,privacy_component_1.PrivacyComponent,tag_component_1.TagComponent,not_found_component_1.NotFoundComponent]}),__metadata("design:paramtypes",[router_1.Router,index_service_1.IndexService,meta_service_1.MetaService,label_service_1.LabelService])],e)}();exports.AppComponent=AppComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYXBwLmNvbXBvbmVudC5qcyJdLCJuYW1lcyI6WyJfX2RlY29yYXRlIiwidGhpcyIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiZCIsImMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiaSIsImRlZmluZVByb3BlcnR5IiwiX19tZXRhZGF0YSIsImsiLCJ2IiwibWV0YWRhdGEiLCJjb3JlXzEiLCJyZXF1aXJlIiwicm91dGVyXzEiLCJodHRwXzEiLCJwbGF0Zm9ybV9icm93c2VyXzEiLCJhbmd1bGFyMl9tb21lbnRfMSIsImhvbWVfY29tcG9uZW50XzEiLCJhbmRyb2lkX2NvbXBvbmVudF8xIiwiYmxvZ19jb21wb25lbnRfMSIsImlvc19jb21wb25lbnRfMSIsImxhYl9jb21wb25lbnRfMSIsImFib3V0X2NvbXBvbmVudF8xIiwib3Blbl9zb3VyY2VfY29tcG9uZW50XzEiLCJwcml2YWN5X2NvbXBvbmVudF8xIiwidGFnX2NvbXBvbmVudF8xIiwibm90X2ZvdW5kX2NvbXBvbmVudF8xIiwiaW5kZXhfc2VydmljZV8xIiwic2VhcmNoX3NlcnZpY2VfMSIsIm1ldGFfc2VydmljZV8xIiwibGFiZWxfc2VydmljZV8xIiwiQXBwQ29tcG9uZW50IiwiX3JvdXRlciIsIl9pbmRleFNlcnZpY2UiLCJfbWV0YVNlcnZpY2UiLCJfbGFiZWxTZXJ2aWNlIiwiX3RoaXMiLCJpc0xvYWRpbmciLCJwb3N0cyIsImFjdGl2aXRpZXMiLCJyZXMiLCJldmVudHMiLCJzdWJzY3JpYmUiLCJldmVudCIsIk5hdmlnYXRpb25TdGFydCIsIk5hdmlnYXRpb25FbmQiLCJwcm90b3R5cGUiLCJuZ09uSW5pdCIsImFjdGlvblNlYXJjaCIsInMiLCJmZXRjaCIsIm1hcCIsImpzb24iLCJzZWFyY2giLCJhY3Rpb25OYXZpZ2F0ZSIsInBvc3QiLCJuYXZpZ2F0ZSIsImxhYmVsIiwicGF0aCIsImdldExpbmtTdHlsZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJpbmRleE9mIiwibGFiZWxuaXplIiwidXBwZXJjYXNlIiwibWFya2Rvd24iLCJyZXBsYWNlIiwibWQiLCJtYXJrZWQiLCJzdWJzdHJpbmciLCJDb21wb25lbnQiLCJtb2R1bGVJZCIsIm1vZHVsZSIsImlkIiwic2VsZWN0b3IiLCJ0ZW1wbGF0ZVVybCIsImRpcmVjdGl2ZXMiLCJST1VURVJfRElSRUNUSVZFUyIsInBpcGVzIiwiVGltZUFnb1BpcGUiLCJwcm92aWRlcnMiLCJJbmRleFNlcnZpY2UiLCJTZWFyY2hTZXJ2aWNlIiwiTWV0YVNlcnZpY2UiLCJMYWJlbFNlcnZpY2UiLCJUaXRsZSIsIkhUVFBfUFJPVklERVJTIiwicHJlY29tcGlsZSIsIkhvbWVDb21wb25lbnQiLCJBbmRyb2lkQ29tcG9uZW50IiwiQmxvZ0NvbXBvbmVudCIsIklPU0NvbXBvbmVudCIsIkxhYkNvbXBvbmVudCIsIkFib3V0Q29tcG9uZW50IiwiT3BlblNvdXJjZUNvbXBvbmVudCIsIlByaXZhY3lDb21wb25lbnQiLCJUYWdDb21wb25lbnQiLCJOb3RGb3VuZENvbXBvbmVudCIsIlJvdXRlciIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBQ0EsSUFBSUEsWUFBY0MsTUFBUUEsS0FBS0QsWUFBZSxTQUFVRSxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhDLEVBQUlDLFVBQVVDLE9BQVFDLEVBQUlILEVBQUksRUFBSUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpRLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSVUsR0FBSWIsRUFBV08sT0FBUyxFQUFHTSxHQUFLLEVBQUdBLEtBQVNULEVBQUlKLEVBQVdhLE1BQUlMLEdBQUtILEVBQUksRUFBSUQsRUFBRUksR0FBS0gsRUFBSSxFQUFJRCxFQUFFSCxFQUFRQyxFQUFLTSxHQUFLSixFQUFFSCxFQUFRQyxLQUFTTSxFQUNoSixPQUFPSCxHQUFJLEdBQUtHLEdBQUtDLE9BQU9LLGVBQWViLEVBQVFDLEVBQUtNLEdBQUlBLEdBRTVETyxXQUFjaEIsTUFBUUEsS0FBS2dCLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsR0FBdUIsZ0JBQVpOLFVBQW9ELGtCQUFyQkEsU0FBUU8sU0FBeUIsTUFBT1AsU0FBUU8sU0FBU0YsRUFBR0MsSUFFdEdFLE9BQVNDLFFBQVEsaUJBQ2pCQyxTQUFXRCxRQUFRLG1CQUNuQkUsT0FBU0YsUUFBUSxpQkFDakJHLG1CQUFxQkgsUUFBUSw0QkFDakNBLFNBQVEsU0FDUixJQUFJSSxtQkFBb0JKLFFBQVEsbUJBQzVCSyxpQkFBbUJMLFFBQVEsb0JBQzNCTSxvQkFBc0JOLFFBQVEsdUJBQzlCTyxpQkFBbUJQLFFBQVEsb0JBQzNCUSxnQkFBa0JSLFFBQVEsbUJBQzFCUyxnQkFBa0JULFFBQVEsbUJBQzFCVSxrQkFBb0JWLFFBQVEscUJBQzVCVyx3QkFBMEJYLFFBQVEsMkJBQ2xDWSxvQkFBc0JaLFFBQVEsdUJBQzlCYSxnQkFBa0JiLFFBQVEsbUJBQzFCYyxzQkFBd0JkLFFBQVEseUJBQ2hDZSxnQkFBa0JmLFFBQVEsNkJBQzFCZ0IsaUJBQW1CaEIsUUFBUSw4QkFDM0JpQixlQUFpQmpCLFFBQVEsNEJBQ3pCa0IsZ0JBQWtCbEIsUUFBUSw2QkFDMUJtQixhQUFnQixXQUNoQixRQUFTQSxHQUFhQyxFQUFTQyxFQUFlQyxFQUFjQyxHQUN4RCxHQUFJQyxHQUFRN0MsSUFDWkEsTUFBS3lDLFFBQVVBLEVBQ2Z6QyxLQUFLMEMsY0FBZ0JBLEVBQ3JCMUMsS0FBSzJDLGFBQWVBLEVBQ3BCM0MsS0FBSzRDLGNBQWdCQSxFQUNyQjVDLEtBQUs4QyxXQUFZLEVBQ2pCOUMsS0FBSytDLFNBQ0wvQyxLQUFLZ0QsY0FDTE4sRUFBY00sV0FBVyxTQUFVQyxHQUFPLE1BQU9KLEdBQU1HLFdBQWFDLElBQ3BFUixFQUFRUyxPQUFPQyxVQUFVLFNBQVVDLEdBQzNCQSxZQUFpQjlCLFVBQVMrQixpQkFDMUJSLEVBQU1FLFNBQ05GLEVBQU1DLFdBQVksR0FFYk0sWUFBaUI5QixVQUFTZ0MsZ0JBQy9CVCxFQUFNQyxXQUFZLEtBNEQ5QixNQXpEQU4sR0FBYWUsVUFBVUMsU0FBVyxhQUNsQ2hCLEVBQWFlLFVBQVVFLGFBQWUsU0FBVUMsR0FDNUMsR0FBSWIsR0FBUTdDLElBQ1pBLE1BQUswQyxjQUFjaUIsUUFDZEMsSUFBSSxTQUFVWCxHQUFPLE1BQU9BLEdBQUlZLFNBQ2hDVixVQUFVLFNBQVVGLEdBQ3JCSixFQUFNRSxNQUFRRixFQUFNSCxjQUFjb0IsT0FBT2IsRUFBS1MsR0FBSSxRQUFTLGVBR25FbEIsRUFBYWUsVUFBVVEsZUFBaUIsU0FBVUMsR0FDOUNoRSxLQUFLeUMsUUFBUXdCLFVBQVUsSUFBTUQsRUFBS0UsTUFBUSxJQUFNRixFQUFLRyxRQUV6RDNCLEVBQWFlLFVBQVVhLGFBQWUsU0FBVUQsR0FDNUMsTUFBaUIsTUFBVEEsR0FBZ0JFLE9BQU9DLFNBQVNDLFdBQWFKLEdBQW1CLE1BQVRBLEdBQTJELElBQTNDRSxPQUFPQyxTQUFTQyxTQUFTQyxRQUFRTCxJQUVwSDNCLEVBQWFlLFVBQVVrQixVQUFZLFNBQVVQLEVBQU9RLEdBQ2hELE1BQU8xRSxNQUFLNEMsY0FBYzZCLFVBQVVQLEVBQU9RLElBRS9DbEMsRUFBYWUsVUFBVW9CLFNBQVcsU0FBVWpCLEdBQ3hDQSxFQUFJQSxFQUFFa0IsUUFBUSxZQUFhLEdBQzNCLElBQUlDLEdBQUtDLE9BQU9wQixFQUNoQixPQUFPbUIsR0FBR0UsVUFBVSxFQUFHRixFQUFHckUsT0FBUyxHQUFLLEtBRTVDZ0MsRUFBZXpDLFlBQ1hxQixPQUFPNEQsV0FDSEMsU0FBVUMsT0FBT0MsR0FDakJDLFNBQVUsTUFDVkMsWUFBYSxxQ0FDYkMsWUFDSWhFLFNBQVNpRSxtQkFFYkMsT0FDSS9ELGtCQUFrQmdFLGFBRXRCQyxXQUNJdEQsZ0JBQWdCdUQsYUFDaEJ0RCxpQkFBaUJ1RCxjQUNqQnRELGVBQWV1RCxZQUNmdEQsZ0JBQWdCdUQsYUFDaEJ0RSxtQkFBbUJ1RSxNQUNuQnhFLE9BQU95RSxnQkFFWEMsWUFDSXZFLGlCQUFpQndFLGNBQ2pCdkUsb0JBQW9Cd0UsaUJBQ3BCdkUsaUJBQWlCd0UsY0FDakJ2RSxnQkFBZ0J3RSxhQUNoQnZFLGdCQUFnQndFLGFBQ2hCdkUsa0JBQWtCd0UsZUFDbEJ2RSx3QkFBd0J3RSxvQkFDeEJ2RSxvQkFBb0J3RSxpQkFDcEJ2RSxnQkFBZ0J3RSxhQUNoQnZFLHNCQUFzQndFLHFCQUc5QjNGLFdBQVcscUJBQXNCTSxTQUFTc0YsT0FBUXhFLGdCQUFnQnVELGFBQWNyRCxlQUFldUQsWUFBYXRELGdCQUFnQnVELGdCQUM3SHRELEtBR1BxRSxTQUFRckUsYUFBZUEiLCJmaWxlIjoiY29tcG9uZW50cy9hcHAuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xudmFyIGNvcmVfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL2NvcmUnKTtcbnZhciByb3V0ZXJfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL3JvdXRlcicpO1xudmFyIGh0dHBfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL2h0dHAnKTtcbnZhciBwbGF0Zm9ybV9icm93c2VyXzEgPSByZXF1aXJlKCdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJyk7XG5yZXF1aXJlKCdtYXJrZWQnKTtcbnZhciBhbmd1bGFyMl9tb21lbnRfMSA9IHJlcXVpcmUoJ2FuZ3VsYXIyLW1vbWVudCcpO1xudmFyIGhvbWVfY29tcG9uZW50XzEgPSByZXF1aXJlKCcuL2hvbWUuY29tcG9uZW50Jyk7XG52YXIgYW5kcm9pZF9jb21wb25lbnRfMSA9IHJlcXVpcmUoJy4vYW5kcm9pZC5jb21wb25lbnQnKTtcbnZhciBibG9nX2NvbXBvbmVudF8xID0gcmVxdWlyZSgnLi9ibG9nLmNvbXBvbmVudCcpO1xudmFyIGlvc19jb21wb25lbnRfMSA9IHJlcXVpcmUoJy4vaW9zLmNvbXBvbmVudCcpO1xudmFyIGxhYl9jb21wb25lbnRfMSA9IHJlcXVpcmUoJy4vbGFiLmNvbXBvbmVudCcpO1xudmFyIGFib3V0X2NvbXBvbmVudF8xID0gcmVxdWlyZSgnLi9hYm91dC5jb21wb25lbnQnKTtcbnZhciBvcGVuX3NvdXJjZV9jb21wb25lbnRfMSA9IHJlcXVpcmUoJy4vb3Blbi5zb3VyY2UuY29tcG9uZW50Jyk7XG52YXIgcHJpdmFjeV9jb21wb25lbnRfMSA9IHJlcXVpcmUoJy4vcHJpdmFjeS5jb21wb25lbnQnKTtcbnZhciB0YWdfY29tcG9uZW50XzEgPSByZXF1aXJlKCcuL3RhZy5jb21wb25lbnQnKTtcbnZhciBub3RfZm91bmRfY29tcG9uZW50XzEgPSByZXF1aXJlKCcuL25vdC5mb3VuZC5jb21wb25lbnQnKTtcbnZhciBpbmRleF9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9pbmRleC5zZXJ2aWNlJyk7XG52YXIgc2VhcmNoX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL3NlYXJjaC5zZXJ2aWNlJyk7XG52YXIgbWV0YV9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9tZXRhLnNlcnZpY2UnKTtcbnZhciBsYWJlbF9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9sYWJlbC5zZXJ2aWNlJyk7XG52YXIgQXBwQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBcHBDb21wb25lbnQoX3JvdXRlciwgX2luZGV4U2VydmljZSwgX21ldGFTZXJ2aWNlLCBfbGFiZWxTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX3JvdXRlciA9IF9yb3V0ZXI7XG4gICAgICAgIHRoaXMuX2luZGV4U2VydmljZSA9IF9pbmRleFNlcnZpY2U7XG4gICAgICAgIHRoaXMuX21ldGFTZXJ2aWNlID0gX21ldGFTZXJ2aWNlO1xuICAgICAgICB0aGlzLl9sYWJlbFNlcnZpY2UgPSBfbGFiZWxTZXJ2aWNlO1xuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMucG9zdHMgPSBbXTtcbiAgICAgICAgdGhpcy5hY3Rpdml0aWVzID0gW107XG4gICAgICAgIF9pbmRleFNlcnZpY2UuYWN0aXZpdGllcyhmdW5jdGlvbiAocmVzKSB7IHJldHVybiBfdGhpcy5hY3Rpdml0aWVzID0gcmVzOyB9KTtcbiAgICAgICAgX3JvdXRlci5ldmVudHMuc3Vic2NyaWJlKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2Ygcm91dGVyXzEuTmF2aWdhdGlvblN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucG9zdHMgPSBbXTtcbiAgICAgICAgICAgICAgICBfdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQgaW5zdGFuY2VvZiByb3V0ZXJfMS5OYXZpZ2F0aW9uRW5kKVxuICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgQXBwQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBBcHBDb21wb25lbnQucHJvdG90eXBlLmFjdGlvblNlYXJjaCA9IGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2luZGV4U2VydmljZS5mZXRjaCgpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5qc29uKCk7IH0pXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIF90aGlzLnBvc3RzID0gX3RoaXMuX2luZGV4U2VydmljZS5zZWFyY2gocmVzLCBzLCBbXCJ0aXRsZVwiLCBcImNvbnRlbnRcIl0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFwcENvbXBvbmVudC5wcm90b3R5cGUuYWN0aW9uTmF2aWdhdGUgPSBmdW5jdGlvbiAocG9zdCkge1xuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvJyArIHBvc3QubGFiZWwgKyBcIi9cIiArIHBvc3QucGF0aF0pO1xuICAgIH07XG4gICAgQXBwQ29tcG9uZW50LnByb3RvdHlwZS5nZXRMaW5rU3R5bGUgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICByZXR1cm4gKHBhdGggPT09IFwiL1wiICYmIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gcGF0aCkgfHwgKHBhdGggIT09IFwiL1wiICYmIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKHBhdGgpID09PSAwKTtcbiAgICB9O1xuICAgIEFwcENvbXBvbmVudC5wcm90b3R5cGUubGFiZWxuaXplID0gZnVuY3Rpb24gKGxhYmVsLCB1cHBlcmNhc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhYmVsU2VydmljZS5sYWJlbG5pemUobGFiZWwsIHVwcGVyY2FzZSk7XG4gICAgfTtcbiAgICBBcHBDb21wb25lbnQucHJvdG90eXBlLm1hcmtkb3duID0gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcyA9IHMucmVwbGFjZSgvXFwqXFwqXFwqXFwqL2csIFwiXCIpO1xuICAgICAgICB2YXIgbWQgPSBtYXJrZWQocyk7XG4gICAgICAgIHJldHVybiBtZC5zdWJzdHJpbmcoMywgbWQubGVuZ3RoIC0gNSkgKyBcIiBcIjtcbiAgICB9O1xuICAgIEFwcENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcbiAgICAgICAgICAgIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gICAgICAgICAgICBzZWxlY3RvcjogJ2FwcCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9kaXN0L2FwcC92aWV3cy9hcHAuY29tcG9uZW50Lmh0bWwnLFxuICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgIHJvdXRlcl8xLlJPVVRFUl9ESVJFQ1RJVkVTXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgcGlwZXM6IFtcbiAgICAgICAgICAgICAgICBhbmd1bGFyMl9tb21lbnRfMS5UaW1lQWdvUGlwZVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIGluZGV4X3NlcnZpY2VfMS5JbmRleFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgc2VhcmNoX3NlcnZpY2VfMS5TZWFyY2hTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIG1ldGFfc2VydmljZV8xLk1ldGFTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIGxhYmVsX3NlcnZpY2VfMS5MYWJlbFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcGxhdGZvcm1fYnJvd3Nlcl8xLlRpdGxlLFxuICAgICAgICAgICAgICAgIGh0dHBfMS5IVFRQX1BST1ZJREVSU1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHByZWNvbXBpbGU6IFtcbiAgICAgICAgICAgICAgICBob21lX2NvbXBvbmVudF8xLkhvbWVDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYW5kcm9pZF9jb21wb25lbnRfMS5BbmRyb2lkQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGJsb2dfY29tcG9uZW50XzEuQmxvZ0NvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBpb3NfY29tcG9uZW50XzEuSU9TQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGxhYl9jb21wb25lbnRfMS5MYWJDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYWJvdXRfY29tcG9uZW50XzEuQWJvdXRDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgb3Blbl9zb3VyY2VfY29tcG9uZW50XzEuT3BlblNvdXJjZUNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBwcml2YWN5X2NvbXBvbmVudF8xLlByaXZhY3lDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgdGFnX2NvbXBvbmVudF8xLlRhZ0NvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBub3RfZm91bmRfY29tcG9uZW50XzEuTm90Rm91bmRDb21wb25lbnRcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSksIFxuICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtyb3V0ZXJfMS5Sb3V0ZXIsIGluZGV4X3NlcnZpY2VfMS5JbmRleFNlcnZpY2UsIG1ldGFfc2VydmljZV8xLk1ldGFTZXJ2aWNlLCBsYWJlbF9zZXJ2aWNlXzEuTGFiZWxTZXJ2aWNlXSlcbiAgICBdLCBBcHBDb21wb25lbnQpO1xuICAgIHJldHVybiBBcHBDb21wb25lbnQ7XG59KCkpO1xuZXhwb3J0cy5BcHBDb21wb25lbnQgPSBBcHBDb21wb25lbnQ7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

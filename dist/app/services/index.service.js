"use strict";var __decorate=this&&this.__decorate||function(e,t,r,n){var i,c=arguments.length,o=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(c<3?i(o):c>3?i(t,r,o):i(t,r))||o);return c>3&&o&&Object.defineProperty(t,r,o),o},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),http_1=require("@angular/http"),search_service_1=require("./search.service"),Rx_1=require("rxjs/Rx"),IndexService=function(){function e(e,t){this._http=e,this._searchService=t,this.fullData=[]}return e.prototype.activities=function(e){this._http.get("indexes/activities.json").map(function(e){return e.json()}).subscribe(e)},e.prototype.getPost=function(e,t){return Rx_1.Observable.forkJoin(this._http.get(e+"/"+t+"/content.json").map(function(e){return e.json()}),this._http.get(e+"/"+t+"/CONTENT.md"))},e.prototype.fetch=function(){return this._http.get("indexes/full.json")},e.prototype.search=function(e,t,r,n){return void 0===t&&(t=""),void 0===n&&(n=!0),""===t?[]:"home"===t?e:this._searchService.perform(e,t,r,n)},e.prototype.simplify=function(e){var t=this,r=[];return e.forEach(function(e){var n=Object.assign({},e);n.content=t._searchService.shortify(n.content)+"...",r.push(n)}),r},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http,search_service_1.SearchService])],e)}();exports.IndexService=IndexService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL2luZGV4LnNlcnZpY2UuanMiXSwibmFtZXMiOlsiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwiY29yZV8xIiwicmVxdWlyZSIsImh0dHBfMSIsInNlYXJjaF9zZXJ2aWNlXzEiLCJSeF8xIiwiSW5kZXhTZXJ2aWNlIiwiX2h0dHAiLCJfc2VhcmNoU2VydmljZSIsImZ1bGxEYXRhIiwicHJvdG90eXBlIiwiYWN0aXZpdGllcyIsImNhbGxiYWNrIiwiZ2V0IiwibWFwIiwicmVzIiwianNvbiIsInN1YnNjcmliZSIsImdldFBvc3QiLCJzZWN0aW9uIiwicGF0aCIsIk9ic2VydmFibGUiLCJmb3JrSm9pbiIsImZldGNoIiwic2VhcmNoIiwibmVlZGxlIiwiZmllbGRzIiwiaGlnaHRsaWdodCIsInBlcmZvcm0iLCJzaW1wbGlmeSIsIl90aGlzIiwicmVzdWx0cyIsImZvckVhY2giLCJlbGVtZW50IiwicmVzdWx0IiwiYXNzaWduIiwiY29udGVudCIsInNob3J0aWZ5IiwicHVzaCIsIkluamVjdGFibGUiLCJIdHRwIiwiU2VhcmNoU2VydmljZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFlBQ0EsSUFBSUEsWUFBY0MsTUFBUUEsS0FBS0QsWUFBZSxTQUFVRSxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhDLEVBQUlDLFVBQVVDLE9BQVFDLEVBQUlILEVBQUksRUFBSUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpRLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSVUsR0FBSWIsRUFBV08sT0FBUyxFQUFHTSxHQUFLLEVBQUdBLEtBQVNULEVBQUlKLEVBQVdhLE1BQUlMLEdBQUtILEVBQUksRUFBSUQsRUFBRUksR0FBS0gsRUFBSSxFQUFJRCxFQUFFSCxFQUFRQyxFQUFLTSxHQUFLSixFQUFFSCxFQUFRQyxLQUFTTSxFQUNoSixPQUFPSCxHQUFJLEdBQUtHLEdBQUtDLE9BQU9LLGVBQWViLEVBQVFDLEVBQUtNLEdBQUlBLEdBRTVETyxXQUFjaEIsTUFBUUEsS0FBS2dCLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsR0FBdUIsZ0JBQVpOLFVBQW9ELGtCQUFyQkEsU0FBUU8sU0FBeUIsTUFBT1AsU0FBUU8sU0FBU0YsRUFBR0MsSUFFdEdFLE9BQVNDLFFBQVEsaUJBQ2pCQyxPQUFTRCxRQUFRLGlCQUNqQkUsaUJBQW1CRixRQUFRLG9CQUMzQkcsS0FBT0gsUUFBUSxXQUNmSSxhQUFnQixXQUNoQixRQUFTQSxHQUFhQyxFQUFPQyxHQUN6QjNCLEtBQUswQixNQUFRQSxFQUNiMUIsS0FBSzJCLGVBQWlCQSxFQUN0QjNCLEtBQUs0QixZQXdDVCxNQXRDQUgsR0FBYUksVUFBVUMsV0FBYSxTQUFVQyxHQUMxQy9CLEtBQUswQixNQUFNTSxJQUFJLDJCQUNWQyxJQUFJLFNBQVVDLEdBQU8sTUFBT0EsR0FBSUMsU0FDaENDLFVBQVVMLElBRW5CTixFQUFhSSxVQUFVUSxRQUFVLFNBQVVDLEVBQVNDLEdBQ2hELE1BQU9mLE1BQUtnQixXQUFXQyxTQUFTekMsS0FBSzBCLE1BQU1NLElBQUlNLEVBQVUsSUFBTUMsRUFBTyxpQkFBaUJOLElBQUksU0FBVUMsR0FBTyxNQUFPQSxHQUFJQyxTQUFZbkMsS0FBSzBCLE1BQU1NLElBQUlNLEVBQVUsSUFBTUMsRUFBTyxpQkFFN0tkLEVBQWFJLFVBQVVhLE1BQVEsV0FDM0IsTUFBTzFDLE1BQUswQixNQUFNTSxJQUFJLHNCQUUxQlAsRUFBYUksVUFBVWMsT0FBUyxTQUFVZixFQUFVZ0IsRUFBUUMsRUFBUUMsR0FHaEUsTUFGZSxVQUFYRixJQUFxQkEsRUFBUyxJQUNmLFNBQWZFLElBQXlCQSxHQUFhLEdBQzNCLEtBQVhGLEtBR2dCLFNBQVhBLEVBQ0VoQixFQUdBNUIsS0FBSzJCLGVBQWVvQixRQUFRbkIsRUFBVWdCLEVBQVFDLEVBQVFDLElBR3JFckIsRUFBYUksVUFBVW1CLFNBQVcsU0FBVXBCLEdBQ3hDLEdBQUlxQixHQUFRakQsS0FDUmtELElBTUosT0FMQXRCLEdBQVN1QixRQUFRLFNBQVVDLEdBQ3ZCLEdBQUlDLEdBQVMzQyxPQUFPNEMsVUFBV0YsRUFDL0JDLEdBQU9FLFFBQVVOLEVBQU10QixlQUFlNkIsU0FBU0gsRUFBT0UsU0FBVyxNQUNqRUwsRUFBUU8sS0FBS0osS0FFVkgsR0FFWHpCLEVBQWUxQixZQUNYcUIsT0FBT3NDLGFBQ1AxQyxXQUFXLHFCQUFzQk0sT0FBT3FDLEtBQU1wQyxpQkFBaUJxQyxpQkFDaEVuQyxLQUdQb0MsU0FBUXBDLGFBQWVBIiwiZmlsZSI6InNlcnZpY2VzL2luZGV4LnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbn07XG52YXIgY29yZV8xID0gcmVxdWlyZSgnQGFuZ3VsYXIvY29yZScpO1xudmFyIGh0dHBfMSA9IHJlcXVpcmUoJ0Bhbmd1bGFyL2h0dHAnKTtcbnZhciBzZWFyY2hfc2VydmljZV8xID0gcmVxdWlyZSgnLi9zZWFyY2guc2VydmljZScpO1xudmFyIFJ4XzEgPSByZXF1aXJlKCdyeGpzL1J4Jyk7XG52YXIgSW5kZXhTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbmRleFNlcnZpY2UoX2h0dHAsIF9zZWFyY2hTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuX2h0dHAgPSBfaHR0cDtcbiAgICAgICAgdGhpcy5fc2VhcmNoU2VydmljZSA9IF9zZWFyY2hTZXJ2aWNlO1xuICAgICAgICB0aGlzLmZ1bGxEYXRhID0gW107XG4gICAgfVxuICAgIEluZGV4U2VydmljZS5wcm90b3R5cGUuYWN0aXZpdGllcyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9odHRwLmdldCgnaW5kZXhlcy9hY3Rpdml0aWVzLmpzb24nKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMuanNvbigpOyB9KVxuICAgICAgICAgICAgLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfTtcbiAgICBJbmRleFNlcnZpY2UucHJvdG90eXBlLmdldFBvc3QgPSBmdW5jdGlvbiAoc2VjdGlvbiwgcGF0aCkge1xuICAgICAgICByZXR1cm4gUnhfMS5PYnNlcnZhYmxlLmZvcmtKb2luKHRoaXMuX2h0dHAuZ2V0KHNlY3Rpb24gKyAnLycgKyBwYXRoICsgXCIvY29udGVudC5qc29uXCIpLm1hcChmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMuanNvbigpOyB9KSwgdGhpcy5faHR0cC5nZXQoc2VjdGlvbiArICcvJyArIHBhdGggKyBcIi9DT05URU5ULm1kXCIpKTtcbiAgICB9O1xuICAgIEluZGV4U2VydmljZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCgnaW5kZXhlcy9mdWxsLmpzb24nKTtcbiAgICB9O1xuICAgIEluZGV4U2VydmljZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKGZ1bGxEYXRhLCBuZWVkbGUsIGZpZWxkcywgaGlnaHRsaWdodCkge1xuICAgICAgICBpZiAobmVlZGxlID09PSB2b2lkIDApIHsgbmVlZGxlID0gXCJcIjsgfVxuICAgICAgICBpZiAoaGlnaHRsaWdodCA9PT0gdm9pZCAwKSB7IGhpZ2h0bGlnaHQgPSB0cnVlOyB9XG4gICAgICAgIGlmIChuZWVkbGUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZWVkbGUgPT09IFwiaG9tZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVsbERhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VhcmNoU2VydmljZS5wZXJmb3JtKGZ1bGxEYXRhLCBuZWVkbGUsIGZpZWxkcywgaGlnaHRsaWdodCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEluZGV4U2VydmljZS5wcm90b3R5cGUuc2ltcGxpZnkgPSBmdW5jdGlvbiAoZnVsbERhdGEpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZnVsbERhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IE9iamVjdC5hc3NpZ24oe30sIGVsZW1lbnQpO1xuICAgICAgICAgICAgcmVzdWx0LmNvbnRlbnQgPSBfdGhpcy5fc2VhcmNoU2VydmljZS5zaG9ydGlmeShyZXN1bHQuY29udGVudCkgKyBcIi4uLlwiO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuICAgIEluZGV4U2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLCBcbiAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbaHR0cF8xLkh0dHAsIHNlYXJjaF9zZXJ2aWNlXzEuU2VhcmNoU2VydmljZV0pXG4gICAgXSwgSW5kZXhTZXJ2aWNlKTtcbiAgICByZXR1cm4gSW5kZXhTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydHMuSW5kZXhTZXJ2aWNlID0gSW5kZXhTZXJ2aWNlO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
